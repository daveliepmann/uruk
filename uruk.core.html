<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>uruk.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Uruk</span> <span class="project-version">0.3.11</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>uruk</span></div></div></li><li class="depth-2 branch current"><a href="uruk.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>examples</span></div></div></li><li class="depth-3 branch"><a href="uruk.examples.readme.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>readme</span></div></a></li><li class="depth-3"><a href="uruk.examples.types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>types</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="uruk.core.html#var--.3Econtent-capability"><div class="inner"><span>-&gt;content-capability</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var--.3Edoc-format"><div class="inner"><span>-&gt;doc-format</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var--.3Edoc-repair-level"><div class="inner"><span>-&gt;doc-repair-level</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var--.3Estring-format"><div class="inner"><span>-&gt;string-format</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var--.3Etransaction-mode"><div class="inner"><span>-&gt;transaction-mode</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var--.3Eupdate-mode"><div class="inner"><span>-&gt;update-mode</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var--.3Exml-str"><div class="inner"><span>-&gt;xml-str</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-commit"><div class="inner"><span>commit</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-configure-content-source"><div class="inner"><span>configure-content-source</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-configure-session"><div class="inner"><span>configure-session</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-content-creation-options"><div class="inner"><span>content-creation-options</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-content-creation-options-.3Emap"><div class="inner"><span>content-creation-options-&gt;map</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-convert-types"><div class="inner"><span>convert-types</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-create-default-session"><div class="inner"><span>create-default-session</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-create-session"><div class="inner"><span>create-session</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-element-.3Econtent"><div class="inner"><span>element-&gt;content</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-execute-module"><div class="inner"><span>execute-module</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-execute-xquery"><div class="inner"><span>execute-xquery</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-insert-element"><div class="inner"><span>insert-element</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-insert-string"><div class="inner"><span>insert-string</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-java-.3Enum"><div class="inner"><span>java-&gt;num</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-java-json-.3Eclj-json"><div class="inner"><span>java-json-&gt;clj-json</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-make-content-permissions"><div class="inner"><span>make-content-permissions</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-make-cp-content-source"><div class="inner"><span>make-cp-content-source</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-make-hosted-content-source"><div class="inner"><span>make-hosted-content-source</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-make-request-options"><div class="inner"><span>make-request-options</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-make-security-options"><div class="inner"><span>make-security-options</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-make-uri-content-source"><div class="inner"><span>make-uri-content-source</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-request-options-.3Emap"><div class="inner"><span>request-options-&gt;map</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-result-.3Etype"><div class="inner"><span>result-&gt;type</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-rollback"><div class="inner"><span>rollback</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-security-options-.3Emap"><div class="inner"><span>security-options-&gt;map</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-session-.3Emap"><div class="inner"><span>session-&gt;map</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-shape-results"><div class="inner"><span>shape-results</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-spawn-module"><div class="inner"><span>spawn-module</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-string-.3Econtent"><div class="inner"><span>string-&gt;content</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-submit-request"><div class="inner"><span>submit-request</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-user-credentials-.3Emap"><div class="inner"><span>user-credentials-&gt;map</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-valid-content-creation-options"><div class="inner"><span>valid-content-creation-options</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-valid-request-options"><div class="inner"><span>valid-request-options</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-valid-session-config-options"><div class="inner"><span>valid-session-config-options</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-validate-session-config-options"><div class="inner"><span>validate-session-config-options</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-variable-types"><div class="inner"><span>variable-types</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-version"><div class="inner"><span>version</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-xcc-type-.3Exdm-conv-fn"><div class="inner"><span>xcc-type-&gt;xdm-conv-fn</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-xcc-types"><div class="inner"><span>xcc-types</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-xdm-var-.3Estr"><div class="inner"><span>xdm-var-&gt;str</span></div></a></li><li class="depth-1"><a href="uruk.core.html#var-xml-type-str-.3Econv-fn"><div class="inner"><span>xml-type-str-&gt;conv-fn</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">uruk.core</h1><div class="doc"><div class="markdown"><p>Marklogic XCC core functions: session management, querying, type conversion, transactions.</p></div></div><div class="public anchor" id="var--.3Econtent-capability"><h3>-&gt;content-capability</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Mapping of keywords to content permission capability values. See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentCapability.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentCapability.html</a></p></div></div></div><div class="public anchor" id="var--.3Edoc-format"><h3>-&gt;doc-format</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Mapping of keywords to allowed document formats. Used at insertion time. See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/DocumentFormat.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/DocumentFormat.html</a></p></div></div></div><div class="public anchor" id="var--.3Edoc-repair-level"><h3>-&gt;doc-repair-level</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Mapping of keywords to document repair levels. Used at insertion time. See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/DocumentRepairLevel.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/DocumentRepairLevel.html</a></p></div></div></div><div class="public anchor" id="var--.3Estring-format"><h3>-&gt;string-format</h3><div class="usage"><code>(-&gt;string-format s)</code></div><div class="doc"><div class="markdown"><p>Returns a document format keyword describing given String.</p></div></div></div><div class="public anchor" id="var--.3Etransaction-mode"><h3>-&gt;transaction-mode</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>DEPRECATED - see <a href="https://docs.marklogic.com/guide/relnotes/chap5#id_91389">https://docs.marklogic.com/guide/relnotes/chap5#id_91389</a> Mapping of keywords to valid Session transaction modes. See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.TransactionMode.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.TransactionMode.html</a></p></div></div></div><div class="public anchor" id="var--.3Eupdate-mode"><h3>-&gt;update-mode</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Mapping of keywords <em>and</em> booleans to valid Session update modes. See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.Update.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.Update.html</a></p></div></div></div><div class="public anchor" id="var--.3Exml-str"><h3>-&gt;xml-str</h3><div class="usage"><code>(-&gt;xml-str xml)</code></div><div class="doc"><div class="markdown"><p>Assumes that its input is valid XML in some format, returning that XML in its String representation. Accepts String, hiccup-style vectors, and clojure.data.xml.Element.</p></div></div></div><div class="public anchor" id="var-commit"><h3>commit</h3><div class="usage"><code>(commit session)</code></div><div class="doc"><div class="markdown"><p>Commit <code>session</code> when current queries successfully finish.</p></div></div></div><div class="public anchor" id="var-configure-content-source"><h3>configure-content-source</h3><div class="usage"><code>(configure-content-source content-source {:keys [default-logger preemptive-auth]})</code></div><div class="doc"><div class="markdown"><p>Given a ContentSource object, modifies that object according to the given map of configuration options.</p></div></div></div><div class="public anchor" id="var-configure-session"><h3>configure-session</h3><div class="usage"><code>(configure-session session {:keys [default-request-options logger user-object transaction-mode transaction-timeout auto-commit? update-mode], :as config-options})</code></div><div class="doc"><div class="markdown"><p>Configures the given MarkLogic <code>session</code> according to the given <code>config-options</code>. See <code>create-session</code>.</p></div></div></div><div class="public anchor" id="var-content-creation-options"><h3>content-creation-options</h3><div class="usage"><code>(content-creation-options options)</code></div><div class="doc"><div class="markdown"><p>Creates a ContentCreateOptions object (to pass to a ContentFactory newContent call) out of the given options map. See <code>valid-content-creation-options</code> for supported keywords.</p></div></div></div><div class="public anchor" id="var-content-creation-options-.3Emap"><h3>content-creation-options-&gt;map</h3><div class="usage"><code>(content-creation-options-&gt;map opts)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-convert-types"><h3>convert-types</h3><div class="usage"><code>(convert-types result-sequence &amp; [type-mapping])</code></div><div class="doc"><div class="markdown"><p>Return the result of applying type conversion to the given MarkLogic query result sequence. Default type mappings can be overridden (in part or in whole) with the optional parameter <code>type-mapping</code>, which should contain a transformation function keyed by an XCC type string. See <code>xml-type-str-&gt;conv-fn</code> above.</p></div></div></div><div class="public anchor" id="var-create-default-session"><h3>create-default-session</h3><div class="usage"><code>(create-default-session content-source)</code><code>(create-default-session content-source {:keys [default-request-options logger user-object transaction-mode transaction-timeout auto-commit? update-mode], :as config-options})</code></div><div class="doc"><div class="markdown"><p>Returns a session according to the default login credentials of the given <code>content-source</code>, which must be a com.marklogic.xcc.ContentSource object (see <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentSource.html)">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentSource.html)</a>, presumably created with one of Uruk’s <code>make-*-content-source</code> functions. Optionally takes a map of <code>config-options</code> to configure the session.</p></div></div></div><div class="public anchor" id="var-create-session"><h3>create-session</h3><div class="usage"><code>(create-session db-info)</code><code>(create-session db-info {:keys [default-request-options logger user-object transaction-mode transaction-timeout auto-commit? update-mode], :as config-options})</code><code>(create-session db-info content-source {:keys [default-request-options logger user-object transaction-mode transaction-timeout auto-commit? update-mode], :as config-options})</code></div><div class="doc"><div class="markdown"><p>Create a Session for querying and transacting with. Parameter <code>db-info</code> describing database connection information must include :uri key, and may optionally include connection information for :content-base (database name), and/or :user and :password.</p>
<p>See <code>newSession</code> methods at <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentSource.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentSource.html</a> for detail on allowed parameter arrangements.</p>
<p>If optional <code>options</code> map is passed, the session is configured accordingly. See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.html</a> for valid options. (Note that request options are distinct from session options, though <em>default</em> request options can be set for the session.)</p>
<p>If optional <code>content-source</code> is passed, the Session is created from the given ContentSource rather than creating one from the database info URI.</p></div></div></div><div class="public anchor" id="var-element-.3Econtent"><h3>element-&gt;content</h3><div class="usage"><code>(element-&gt;content uri element)</code><code>(element-&gt;content uri element options)</code></div><div class="doc"><div class="markdown"><p>Given a clojure.data.xml.Element, returns a MarkLogic XCC Content object suitable for inserting to a database. Optionally takes a map of content creation options per <code>content-creation-options</code>. Defaults to XML-formatted documents.</p>
<p>See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Content.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Content.html</a> and <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentFactory.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentFactory.html</a></p></div></div></div><div class="public anchor" id="var-execute-module"><h3>execute-module</h3><div class="usage"><code>(execute-module session module)</code><code>(execute-module session module {:keys [options variables types shape]})</code></div><div class="doc"><div class="markdown"><p>Execute the named module as a request to the database connection defined by the given session. Takes an optional configuration map describing request <code>options</code> and <code>variables</code>, desired <code>shape</code> of the result, and overrides of default type conversion in <code>xml-type-str-&gt;conv-fn</code>.</p>
<p>Options passed must be in <code>valid-request-options</code> and conform to <code>request-options</code>.</p>
<p>Variables may be passed as a map of Strings or with String names corresponding to maps describing the variable using mandatory key <code>:value</code> and optional keys <code>:namespace</code> and <code>:type</code>.`</p>
<p>The shape of results is coerced using <code>shape-results</code> if the <code>:shape</code> key is passed. For example, a value of <code>:single</code> will return only the first value.</p>
<p>Type conversion overrides must be a map using keys present in <code>uruk.core/xml-type-str-&gt;conv-fn</code> and conform to use in <code>convert-types</code>, that is, including values which are a function of one variable.</p></div></div></div><div class="public anchor" id="var-execute-xquery"><h3>execute-xquery</h3><div class="usage"><code>(execute-xquery session query)</code><code>(execute-xquery session query {:keys [options variables types shape]})</code></div><div class="doc"><div class="markdown"><p>Execute the given xquery query as a request to the database connection defined by the given session. Takes an optional configuration map describing request <code>options</code> and <code>variables</code>, desired <code>shape</code> of the result, and overrides of default type conversion in <code>xml-type-str-&gt;conv-fn</code>.</p>
<p>Options passed must be in <code>valid-request-options</code> and conform to <code>request-options</code>.</p>
<p>Variables may be passed as a map of Strings or with String names corresponding to maps describing the variable using mandatory key <code>:value</code> and optional keys <code>:namespace</code> and <code>:type</code>.`</p>
<p>The shape of results is coerced using <code>shape-results</code> if the <code>:shape</code> key is passed. For example, a value of <code>:single</code> will return only the first value.</p>
<p>Type conversion overrides must be a map using keys present in <code>uruk.core/xml-type-str-&gt;conv-fn</code> and conform to use in <code>convert-types</code>, that is, including values which are a function of one variable.</p></div></div></div><div class="public anchor" id="var-insert-element"><h3>insert-element</h3><div class="usage"><code>(insert-element session uri element)</code><code>(insert-element session uri element options)</code></div><div class="doc"><div class="markdown"><p>Inserts the given clojure.data.xml.Element <code>element</code> at the given <code>uri</code> to the database/content-base according determined by the current <code>session</code>. Optionally takes a map of content creation options per <code>content-creation-options</code>.</p>
<p>See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.html#insertContent(com.marklogic.xcc.Content">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.html#insertContent(com.marklogic.xcc.Content</a>)</p></div></div></div><div class="public anchor" id="var-insert-string"><h3>insert-string</h3><div class="usage"><code>(insert-string session uri s)</code><code>(insert-string session uri s options)</code></div><div class="doc"><div class="markdown"><p>Inserts the given String <code>s</code> at the given <code>uri</code> to the database/content-base according determined by the current <code>session</code>. Optionally takes a map of content creation options per <code>content-creation-options</code>.</p>
<p>See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.html#insertContent(com.marklogic.xcc.Content">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.html#insertContent(com.marklogic.xcc.Content</a>)</p></div></div></div><div class="public anchor" id="var-java-.3Enum"><h3>java-&gt;num</h3><div class="usage"><code>(java-&gt;num obj)</code></div><div class="doc"><div class="markdown"><p>Reads a number from a numeric Java object of a type from com.marklogic.xcc.types. Returns nil if not a number. Designed for robust number-handling while preventing read-string security issues. Regex from <a href="http://stackoverflow.com/a/12285023/706499">http://stackoverflow.com/a/12285023/706499</a>. See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/types/package-summary.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/types/package-summary.html</a></p></div></div></div><div class="public anchor" id="var-java-json-.3Eclj-json"><h3>java-json-&gt;clj-json</h3><div class="usage"><code>(java-json-&gt;clj-json java-json)</code></div><div class="doc"><div class="markdown"><p>Given a MarkLogic XCC JSON object, returns a Clojure representation of its JSON data.</p></div></div></div><div class="public anchor" id="var-make-content-permissions"><h3>make-content-permissions</h3><div class="usage"><code>(make-content-permissions permissions)</code></div><div class="doc"><div class="markdown"><p>Return an array of ContentPermissions decribing the given seq of content capability keys.</p></div></div></div><div class="public anchor" id="var-make-cp-content-source"><h3>make-cp-content-source</h3><div class="usage"><code>(make-cp-content-source cxn-provider user password content-base)</code><code>(make-cp-content-source cxn-provider user password content-base {:keys [default-logger preemptive-auth]})</code></div><div class="doc"><div class="markdown"><p>Given a ConnectionProvider, user, password, content-base, and an optional configuration map, returns a ContentSource object that will use the provided ConnectionProvider instance to obtain server connections.</p>
<p>WARNING from the Javadoc: ‘[This function] should only be used by advanced users. A misbehaving ConnectionProvider implementation can result in connection failures and potentially even data loss. Be sure you know what you’re doing.’</p></div></div></div><div class="public anchor" id="var-make-hosted-content-source"><h3>make-hosted-content-source</h3><div class="usage"><code>(make-hosted-content-source host port)</code><code>(make-hosted-content-source host port {:keys [user password content-base security-options default-logger preemptive-auth]})</code></div><div class="doc"><div class="markdown"><p>Return a ContentSource object according to the given <code>host</code> String and integer <code>port</code>, and optionally a configuration map defining the <code>user</code> and <code>password</code>, <code>content-base</code>, <code>security-options</code>, and/or default Logger object and boolean flag for whether basic authentication should be attempted preemptively.</p></div></div></div><div class="public anchor" id="var-make-request-options"><h3>make-request-options</h3><div class="usage"><code>(make-request-options options)</code></div><div class="doc"><div class="markdown"><p>Creates a Request Options object (to pass to a Request or a Session) out of the given options map. See <code>valid-request-options</code> for supported keywords.</p></div></div></div><div class="public anchor" id="var-make-security-options"><h3>make-security-options</h3><div class="usage"><code>(make-security-options ssl-context)</code><code>(make-security-options ssl-context {:keys [protocols cipher-suites]})</code></div><div class="doc"><div class="markdown"><p>Given an SSLContext object and, optionally, a configuration map describing cipher suites and/or protocols to enable, returns a MarkLogic SecurityOptions object configured accordingly, to be used in session or content source creation.</p></div></div></div><div class="public anchor" id="var-make-uri-content-source"><h3>make-uri-content-source</h3><div class="usage"><code>(make-uri-content-source uri)</code><code>(make-uri-content-source uri {:keys [security-options default-logger preemptive-auth]})</code></div><div class="doc"><div class="markdown"><p>Return a ContentSource object according to the given <code>uri</code> and, optionally, a configuration map describing a SecurityOptions object, default Logger object, and boolean flag for whether basic authentication should be attempted preemptively. Accepts URI or string for <code>uri</code>.</p></div></div></div><div class="public anchor" id="var-request-options-.3Emap"><h3>request-options-&gt;map</h3><div class="usage"><code>(request-options-&gt;map req-opts)</code></div><div class="doc"><div class="markdown"><p>Given a RequestOptions object, returns a map describing those request options.</p></div></div></div><div class="public anchor" id="var-result-.3Etype"><h3>result-&gt;type</h3><div class="usage"><code>(result-&gt;type result)</code></div><div class="doc"><div class="markdown"><p>Returns type string of the given query Result object. Currently assumes result is homogenous.</p></div></div></div><div class="public anchor" id="var-rollback"><h3>rollback</h3><div class="usage"><code>(rollback session)</code></div><div class="doc"><div class="markdown"><p>Rollback a multi-statement transaction to reset any un-committed transactions that have already occured in that transaction; for example, delete any created items, restore any deleted items, revert back any edits, etc.</p></div></div></div><div class="public anchor" id="var-security-options-.3Emap"><h3>security-options-&gt;map</h3><div class="usage"><code>(security-options-&gt;map security-options)</code></div><div class="doc"><div class="markdown"><p>Given a SecurityOptions object, returns a map describing its configuration.</p></div></div></div><div class="public anchor" id="var-session-.3Emap"><h3>session-&gt;map</h3><div class="usage"><code>(session-&gt;map session)</code></div><div class="doc"><div class="markdown"><p>Returns a map describing configuration of the given Session object.</p></div></div></div><div class="public anchor" id="var-shape-results"><h3>shape-results</h3><div class="usage"><code>(shape-results server-response shape)</code></div><div class="doc"><div class="markdown"><p>Coerces the server’s MarkLogic query response to the (possibly <code>nil</code>) <code>shape</code> that the client would like the response to take. By default, returns the unchanged server response.</p>
<p>Recognized shapes include: :none - ignore the response :single - return just the first element of the response :single! - if the response is one element, return just that element; if not (i.e. if the response is more than one element) throw an error</p></div></div></div><div class="public anchor" id="var-spawn-module"><h3>spawn-module</h3><div class="usage"><code>(spawn-module session module)</code><code>(spawn-module session module {:keys [options variables]})</code></div><div class="doc"><div class="markdown"><p>Send the named module to the server to be run asynchronously, as a request to the database connection defined by the given session.</p>
<p>Options passed must be in <code>valid-request-options</code> and conform to <code>request-options</code>.</p>
<p>Variables may be passed as a map of Strings or with String names corresponding to maps describing the variable using mandatory key <code>:value</code> and optional keys <code>:namespace</code> and <code>:type</code>.`</p>
<p>See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ModuleSpawn.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ModuleSpawn.html</a></p></div></div></div><div class="public anchor" id="var-string-.3Econtent"><h3>string-&gt;content</h3><div class="usage"><code>(string-&gt;content uri s)</code><code>(string-&gt;content uri s options)</code></div><div class="doc"><div class="markdown"><p>Given a String, returns a MarkLogic XCC Content object suitable for inserting to a database. Optionally takes a map of content creation options per <code>content-creation-options</code>. Determines content format using <code>-&gt;string-format</code>.</p>
<p>See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Content.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Content.html</a> and <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentFactory.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentFactory.html</a></p></div></div></div><div class="public anchor" id="var-submit-request"><h3>submit-request</h3><div class="usage"><code>(submit-request request-factory session query options variables types shape)</code></div><div class="doc"><div class="markdown"><p>Construct, submit, and return raw results of request for the given <code>session</code> using <code>request-factory</code> and <code>query</code>. Modify it with (possibly empty) <code>options</code> and <code>variables</code> maps. Applies type conversion to response according to defaults and <code>xml-type-str-&gt;conv-fn</code>. Variables may be passed as a map of Strings or with String names corresponding to maps describing the variable using mandatory key <code>:value</code> and optional keys <code>:namespace</code> and <code>:type</code>.`</p></div></div></div><div class="public anchor" id="var-user-credentials-.3Emap"><h3>user-credentials-&gt;map</h3><div class="usage"><code>(user-credentials-&gt;map user-credentials)</code></div><div class="doc"><div class="markdown"><p>Given a UserCredentials object, returns a map describing its configuration. See also methods <code>toHttpNegotiateAuth</code> and <code>toHttpDigestAuth</code>.</p></div></div></div><div class="public anchor" id="var-valid-content-creation-options"><h3>valid-content-creation-options</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Set of valid creation options for Content objects. See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentCreateOptions.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/ContentCreateOptions.html</a></p></div></div></div><div class="public anchor" id="var-valid-request-options"><h3>valid-request-options</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Set of valid request options for Request objects. Can also be passed to Sessions as :default-request-options. See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/RequestOptions.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/RequestOptions.html</a></p></div></div></div><div class="public anchor" id="var-valid-session-config-options"><h3>valid-session-config-options</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-validate-session-config-options"><h3>validate-session-config-options</h3><div class="usage"><code>(validate-session-config-options config-options)</code></div><div class="doc"><div class="markdown"><p>Raises an error if the given configuration options are invalid for a MarkLogic session. See <code>valid-session-config-options</code> and <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Session.html</a></p></div></div></div><div class="public anchor" id="var-variable-types"><h3>variable-types</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Mapping between Clojure keywords describing XML Schema types types and the Java representations of those types.</p>
<p>See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/types/ValueType.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/types/ValueType.html</a></p></div></div></div><div class="public anchor" id="var-version"><h3>version</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>XCC release number. Auto-generated. See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Version.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/Version.html</a></p></div></div></div><div class="public anchor" id="var-xcc-type-.3Exdm-conv-fn"><h3>xcc-type-&gt;xdm-conv-fn</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Mapping from Clojure keywords describing XCC types to functions that will convert a Clojure value to an object appropriate for use in a MarkLogic XdmVariable.</p></div></div></div><div class="public anchor" id="var-xcc-types"><h3>xcc-types</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Lookup table for XCC type information.</p>
<p>Includes all Clojure-relevant info about XCC types (and XML schema types relevant to MarkLogic XCC). Provides functions for conversion to and from XCC types and XdmVariable-suitable objects from Clojure.</p>
<p>Values are keyed by keyword describing the XCC type. Each value is organized as follows:</p>
<p><code>:ml-&gt;clj</code> maps to the function used to convert from MarkLogic to Clojure</p>
<p><code>:clj-&gt;xdm</code> maps to the function used to convert from Clojure to a value appropriate for use in an XDM variable</p>
<p><code>:xml-name</code> maps to the string used to refer to this type in XQuery (its XML schema name)</p>
<p><code>:xcc-type</code> maps to the corresponding com.marklogic.xcc.types.ValueType field</p></div></div></div><div class="public anchor" id="var-xdm-var-.3Estr"><h3>xdm-var-&gt;str</h3><div class="usage"><code>(xdm-var-&gt;str xdm-var)</code></div><div class="doc"><div class="markdown"><p>Returns a String representation of the given XDM variable</p></div></div></div><div class="public anchor" id="var-xml-type-str-.3Econv-fn"><h3>xml-type-str-&gt;conv-fn</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Default mapping from XML Schema type strings to Clojure functions that will convert such a value to Clojure types.</p>
<p>See <a href="https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/types/package-summary.html">https://docs.marklogic.com/javadoc/xcc/com/marklogic/xcc/types/package-summary.html</a></p></div></div></div></div></body></html>